<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> hackrf 初探 · xd_xd's blog</title><meta name="description" content="hackrf 初探 - xd_xd"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://xdxd.love/atom.xml" title="xd_xd's blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/u/5256150165?is_all=1" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/stayliv3" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">hackrf 初探</h1><div class="post-info">Aug 6, 2015</div><div class="post-content"><p>#环境搭建</p>
<p>mac上搭建hackrf实验环境，参考了<a href="http://www.hackrf.net/2014/04/mac-install-hackrf/" target="_blank" rel="external">hackrf.net</a>的文章。总体来说使用port安装还是比较简单的。主要就是时间真的很长很长。。。</p>
<p>#驱动测试</p>
<p>运行hackrf_info查看有如下输出信息，说明hackrf驱动正常</p>
<pre><code>Found HackRF board <span class="number">0</span>:
Board ID Number: <span class="number">2</span> (HackRF One)
Firmware Version: git-<span class="number">815</span>d1f6
Part ID Number: <span class="number">0xa000dddd</span> <span class="number">0x00ddddda</span>
Serial Number: <span class="number">0x00000000</span> <span class="number">0x00000000</span> <span class="number">0x5a</span>sdfasdc0 <span class="number">0x2a</span>sdfs4b
</code></pre><p>#抓包重放</p>
<p>一开始看了一些文章不得要领。其实基本的重放攻击很简单。只要使用hackrf_transfer命令就可以。</p>
<p>hackrf_transfer命令参数如下：</p>
<pre><code>➜  ~  hackrf_transfer
receive -r and receive_wav -w options are mutually exclusive
Usage:
    [-d serial_number] <span class="preprocessor"># Serial number of desired HackRF.</span>
    -r &lt;filename&gt; <span class="preprocessor"># Receive data into file.</span>
    -t &lt;filename&gt; <span class="preprocessor"># Transmit data from file.</span>
    -w <span class="preprocessor"># Receive data into file with WAV header and automatic name.</span>
       <span class="preprocessor"># This is for SDR# compatibility and may not work with other software.</span>
    [-f freq_hz] <span class="preprocessor"># Frequency in Hz [<span class="number">0</span>MHz to <span class="number">7250</span>MHz].</span>
    [-i if_freq_hz] <span class="preprocessor"># Intermediate Frequency (IF) in Hz [<span class="number">2150</span>MHz to <span class="number">2750</span>MHz].</span>
    [-o lo_freq_hz] <span class="preprocessor"># Front-end Local Oscillator (LO) frequency in Hz [<span class="number">84</span>MHz to <span class="number">5400</span>MHz].</span>
    [-m image_reject] <span class="preprocessor"># Image rejection filter selection, <span class="number">0</span>=bypass, <span class="number">1</span>=low pass, <span class="number">2</span>=high pass.</span>
    [-a amp_enable] <span class="preprocessor"># RX/TX RF amplifier <span class="number">1</span>=Enable, <span class="number">0</span>=Disable.</span>
    [-p antenna_enable] <span class="preprocessor"># Antenna port power, <span class="number">1</span>=Enable, <span class="number">0</span>=Disable.</span>
    [-l gain_db] <span class="preprocessor"># RX LNA (IF) gain, <span class="number">0</span>-<span class="number">40</span>dB, <span class="number">8</span>dB steps</span>
    [-g gain_db] <span class="preprocessor"># RX VGA (baseband) gain, <span class="number">0</span>-<span class="number">62</span>dB, <span class="number">2</span>dB steps</span>
    [-x gain_db] <span class="preprocessor"># TX VGA (IF) gain, <span class="number">0</span>-<span class="number">47</span>dB, <span class="number">1</span>dB steps</span>
    [-s sample_rate_hz] <span class="preprocessor"># Sample rate in Hz (<span class="number">8</span>/<span class="number">10</span>/<span class="number">12.5</span>/<span class="number">16</span>/<span class="number">20</span>MHz, default <span class="number">10</span>MHz).</span>
    [-n num_samples] <span class="preprocessor"># Number of samples to transfer (default is unlimited).</span>
    [-c amplitude] <span class="preprocessor"># CW signal source mode, amplitude <span class="number">0</span>-<span class="number">127</span> (DC value to DAC).</span>
    [-R] <span class="preprocessor"># Repeat TX mode (default is off)</span>
    [-b baseband_filter_bw_hz] <span class="preprocessor"># Set baseband filter bandwidth in MHz.</span>
    Possible values: <span class="number">1.75</span>/<span class="number">2.5</span>/<span class="number">3.5</span>/<span class="number">5</span>/<span class="number">5.5</span>/<span class="number">6</span>/<span class="number">7</span>/<span class="number">8</span>/<span class="number">9</span>/<span class="number">10</span>/<span class="number">12</span>/<span class="number">14</span>/<span class="number">15</span>/<span class="number">20</span>/<span class="number">24</span>/<span class="number">28</span>MHz, <span class="keyword">default</span> &lt; sample_rate_hz.
</code></pre><p><a href="https://www.youtube.com/watch?v=vHHRGOxcc-0" target="_blank" rel="external">youtube视频教程</a></p>
<p>常用参数解释：</p>
<pre><code>-<span class="ruby">r 接受数据写入文件
</span>-<span class="ruby">f 监听的频率 单位是<span class="constant">Hz</span>，所以<span class="number">443</span>Mhz 应该监听-f <span class="number">44300000000</span>
</span>-<span class="ruby">s 取样比率，单位是<span class="constant">Hz</span>，默认是<span class="number">10</span>Mhz
</span>-<span class="ruby">n 取样数量，默认不限制
</span>-<span class="ruby"><span class="constant">R</span> 循环发射模式。默认关
</span>-<span class="ruby">x <span class="constant">TX</span> <span class="constant">VGA</span> (<span class="constant">IF</span>) 增益，范围<span class="number">0</span>-<span class="number">47</span>dB，必须是<span class="number">1</span>的倍数。
</span>-<span class="ruby">a amp-enable</span>
</code></pre><p>所以最常见的无线门铃的重放使用以下两个命令即可。</p>
<pre><code>hackrf_transfer -r door2<span class="class">.iq</span> -f <span class="number">433920000</span> 
</code></pre><p>过滤433920000hz频率的通信，写入到文件door2.iq</p>
<p>重放命令：</p>
<pre><code>hackrf_transfer -t door2.iq -f <span class="number">433920000</span> -a <span class="number">1</span> -l <span class="number">30</span> -x <span class="number">40</span>
</code></pre><p>经过测试发现，有时候抓的包重放会失败。不知道是硬件问题还是这种粗犷的重放方式本身有可能出错。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2015/08/11/tinyshop商城系统支付漏洞/" class="prev">上一篇</a><a href="/2015/07/13/古典密码的误用之ESPCMS加密函数/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://xdxd.love">xd_xd</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>